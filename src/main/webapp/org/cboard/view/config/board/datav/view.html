<div id="app" style="height: 536px; overflow:hidden">
    <div class="gf-fit-box datav-drag" style="padding: 0px;">
        <div class="datav-row">
            <!-- 图形选择-->
            <div class="datav-col datav-component">
                <el-menu default-active="1-1" class="el-menu-vertical-demo" :collapse="true">
                    <el-submenu index="1">
                        <template slot="title">
                            <i class="el-icon-picture"></i>
                            <span slot="title">图表</span>
                        </template>
                        <el-submenu :index="'1-'+index" v-for="(value,key,index) in widgetList" :key="index">
                            <span slot="title">{{key}}</span>
                            <div style="max-height: 400px;overflow: auto">
                                <el-menu-item :index="'1-'+index+widget.id" v-for="widget in value" :key="widget.id"
                                              :name="widget.name" type="chart" componentName="hex-datav-chart"
                                              @click="drag($event)">
                                    {{widget.name}}
                                </el-menu-item>
                            </div>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="2">
                        <template slot="title">
                            <i class="el-icon-menu"></i>
                            <span slot="title">文字</span>
                        </template>
                        <el-menu-item index="2-1" type="label" componentName="hex-datav-label" @click="drag($event)">
                            标题
                        </el-menu-item>
                        <el-menu-item index="2-2" type="rlabel" componentName="hex-datav-rlabel" @click="drag($event)">滚动文本</el-menu-item>
                    </el-submenu>
                    <el-submenu index="3">
                        <template slot="title">
                            <i class="el-icon-document"></i>
                            <span slot="title">其他</span>
                        </template>
                        <el-menu-item index="3-1" type="kpi" componentName="hex-datav-kpi" @click="drag($event)">指标
                        </el-menu-item>
                        <el-menu-item index="3-2" type="clock" componentName="hex-datav-clock" @click="drag($event)">
                            时钟
                        </el-menu-item>
                        <el-menu-item index="3-3" type="border" componentName="hex-datav-border" @click="drag($event)">
                            静态边框
                        </el-menu-item>
                        <el-menu-item index="3-4" type="ornament" componentName="hex-datav-ornament"
                                      @click="drag($event)">动态边框
                        </el-menu-item>
                    </el-submenu>
                    <el-submenu index="4">
                        <template slot="title">
                            <i class="el-icon-setting"></i>
                            <span slot="title">操作</span>
                        </template>
                        <el-menu-item index="4-1" @click="saveDataVConf">保存</el-menu-item>
                        <el-menu-item index="4-2" @click="viewDataV">预览</el-menu-item>
                    </el-submenu>
                </el-menu>
            </div>
            <!-- 画布-->
            <div class="datav-col">
                <div id="datav-drag" class="datav-canvas"
                     v-bind:style=" {width:dragWidth,height:dragHeight,background:(dataVConf.background?'url(' + basePath + 'imgs/datav/' + dataVConf.background + ') repeat':'')} "
                     @drop='drop($event)' @dragover='allowDrop($event)'>
                    <div class="datav-block" v-for="dataVComponent in dataVComponents" :id="dataVComponent.domId"
                         :type="dataVComponent.componentType" @click="dataVBlockClick(dataVComponent.domId)"
                         :yprop="dataVComponent.chartData.yprop" :xprop="dataVComponent.chartData.xprop"
                         :data-x="(dataVComponent.chartData.positionX*dataVComponent.chartData.xprop).toFixed()"
                         :data-y="(dataVComponent.chartData.positionY*dataVComponent.chartData.yprop).toFixed()"
                         :x="(dataVComponent.chartData.positionX*dataVComponent.chartData.xprop).toFixed()"
                         :y="(dataVComponent.chartData.positionY*dataVComponent.chartData.yprop).toFixed()"
                         v-bind:style=" {width:(dataVComponent.chartData.chartWidth*dataVComponent.chartData.xprop).toFixed() + 'px', height:(dataVComponent.chartData.chartHeight*dataVComponent.chartData.yprop).toFixed() + 'px', transform:'translate(' + (dataVComponent.chartData.positionX*dataVComponent.chartData.xprop).toFixed() + 'px,' + (dataVComponent.chartData.positionY*dataVComponent.chartData.yprop).toFixed() + 'px)'} ">
                        <div class="datav-view-close" style="display: none;"><i class="fa fa-times" aria-hidden="true"
                                                                                @click="closeDataVWin(dataVComponent.domId)"></i>
                        </div>
                        <component v-bind:is="dataVComponent.componentName"
                                   v-bind:chartData="dataVComponent.chartData"></component>
                    </div>
                </div>
            </div>
            <!-- 数据修改-->
            <div class="datav-col datav-component-conf">
                <el-tabs id="datavComponentConf" v-model="tabActiveName">
                    <el-tab-pane label="样式" name="one">
                        <div class="title">页面设置</div>
                        <el-collapse v-model="pageCssItem" accordion>
                            <!-- 全局样式设置-->
                            <el-collapse-item title="全局样式" name="1">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="分类">
                                        <el-select v-model="dataVConf.categoryId" placeholder="请选择">
                                            <el-option v-for="data in categoryList"
                                                       :key="data.id" :label="data.name" :value="data.id">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="监控主题">
                                        <el-input v-model="dataVConf.viewName"></el-input>
                                    </el-form-item>
                                    <el-form-item label="屏幕大小">
                                        <div class="datav-row">
                                            <div class="datav-col" style="width: 30px;padding-right: 2px;">
                                                <el-input v-model="dataVConf.screenWidth"
                                                          @change="screenSizeChange"></el-input>
                                                <div class="datav-component-conf-tips">宽度</div>
                                            </div>
                                            <div class="datav-col" style="width: 30px;padding-left: 2px;">
                                                <el-input v-model="dataVConf.screenHeight"
                                                          @change="screenSizeChange"></el-input>
                                                <div class="datav-component-conf-tips">高度</div>
                                            </div>
                                        </div>
                                    </el-form-item>
                                    <el-form-item label="背景图">
                                        <div class="datav-upload" @drop='dropUpload($event)'
                                             @dragover='allowDrop($event)'>将图片拖拽到此区域
                                        </div>
                                    </el-form-item>
                                    <el-form-item label="背景图">
                                        <img style="width: 100%;height: 80px;"
                                             :src="dataVConf.background?basePath + 'imgs/datav/' + dataVConf.background:basePath + 'imgs/datav/canvas.png'"/>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!---图表尺寸位置设置-->
                            <el-collapse-item title="图表尺寸位置" name="2" v-show="dataVChartData.chartType!=null">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="图表编号">
                                        <el-input :disabled="true" v-model="dataVChartData.domId"></el-input>
                                    </el-form-item>
                                    <el-form-item label="图表尺寸">
                                        <div class="datav-row">
                                            <div class="datav-col" style="width: 30px;padding-right: 2px;">
                                                <el-input v-model="dataVChartData.chartWidth"></el-input>
                                                <div class="datav-component-conf-tips">宽度</div>
                                            </div>
                                            <div class="datav-col" style="width: 30px;padding-left: 2px;">
                                                <el-input v-model="dataVChartData.chartHeight"></el-input>
                                                <div class="datav-component-conf-tips">高度</div>
                                            </div>
                                        </div>
                                    </el-form-item>
                                    <el-form-item label="图表位置">
                                        <div class="datav-row">
                                            <div class="datav-col" style="width: 30px;padding-right: 2px;">
                                                <el-input v-model="dataVChartData.positionX"></el-input>
                                                <div class="datav-component-conf-tips">横坐标</div>
                                            </div>
                                            <div class="datav-col" style="width: 30px;padding-left: 2px;">
                                                <el-input v-model="dataVChartData.positionY"></el-input>
                                                <div class="datav-component-conf-tips">纵坐标</div>
                                            </div>
                                        </div>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!--图表组件设置-->
                            <el-collapse-item title="图表组件" name="3"
                                              v-show="dataVChartData.chartType=='chart' ">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="背景颜色">
                                        <input v-model="dataVChartData.bgColor" type="color"/>
                                    </el-form-item>
                                    <el-form-item label="图表编号">
                                        <el-input v-model="dataVChartData.widgetId"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!--指标卡组件设置-->
                            <el-collapse-item title="指标卡Label样式" name="14-1" v-show="dataVChartData.chartType=='kpi'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="字号">
                                        <el-input placeholder="数值"
                                                  v-model="dataVChartData.dataVConfChartCSS.labelFontSize"></el-input>
                                    </el-form-item>
                                    <el-form-item label="字体颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.labelColor" type="color"/>
                                    </el-form-item>
                                    <el-form-item label="字体粗细">
                                        <el-select v-model="dataVChartData.dataVConfChartCSS.labelFontWeight"
                                                   placeholder="请选择">
                                            <el-option v-for="data in fontWeight"
                                                       :key="data.key" :label="data.key" :value="data.value">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="背景颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.labelBgColor" type="color"/>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <el-collapse-item title="指标卡Value样式" name="14-2" v-show="dataVChartData.chartType=='kpi'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="字号">
                                        <el-input placeholder="数值"
                                                  v-model="dataVChartData.dataVConfChartCSS.textFontSize"></el-input>
                                    </el-form-item>
                                    <el-form-item label="字体颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.textColor" type="color"/>
                                    </el-form-item>
                                    <el-form-item label="字体粗细">
                                        <el-select v-model="dataVChartData.dataVConfChartCSS.textFontWeight"
                                                   placeholder="请选择">
                                            <el-option v-for="data in fontWeight"
                                                       :key="data.key" :label="data.key" :value="data.value">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="背景颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.textBgColor" type="color"/>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <el-collapse-item title="指标卡参数" name="14-3" v-show="dataVChartData.chartType=='kpi'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="Label值">
                                        <el-input v-model="dataVChartData.jsonData.label"></el-input>
                                    </el-form-item>
                                    <el-form-item label="Value值">
                                        <el-input v-model="dataVChartData.jsonData.value"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!--标题组件设置-->
                            <el-collapse-item title="标题组件" name="15" v-show="dataVChartData.chartType=='label'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="标题名">
                                        <el-input v-model="dataVChartData.dataVConfChartCSS.chartTitle"></el-input>
                                    </el-form-item>
                                    <el-form-item label="字号">
                                        <el-input placeholder="数值"
                                                  v-model="dataVChartData.dataVConfChartCSS.titleFontSize"></el-input>
                                    </el-form-item>
                                    <el-form-item label="字体颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.titleColor" type="color"/>
                                    </el-form-item>
                                    <el-form-item label="字体粗细">
                                        <el-select v-model="dataVChartData.dataVConfChartCSS.titleFontWeight"
                                                   placeholder="请选择">
                                            <el-option v-for="data in fontWeight"
                                                       :key="data.key" :label="data.key" :value="data.value">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!--边框组件设置-->
                            <el-collapse-item title="边框组件" name="16" v-show="dataVChartData.chartType=='border'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="框样式">
                                        <el-select v-model="dataVChartData.chartStyle" placeholder="请选择">
                                            <el-option v-for="data in borderStyle"
                                                       :key="data.key" :label="data.key" :value="data.value">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!--装饰组件设置-->
                            <el-collapse-item title="装饰组件" name="19" v-show="dataVChartData.chartType=='ornament'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="装饰元素">
                                        <el-select v-model="dataVChartData.chartStyle" placeholder="请选择">
                                            <el-option v-for="data in ornamentStyle"
                                                       :key="data.key" :label="data.key" :value="data.value">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!--时钟组件设置-->
                            <el-collapse-item title="图标样式" name="17-1" v-show="dataVChartData.chartType=='clock'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="大小">
                                        <el-input placeholder="数值"
                                                  v-model="dataVChartData.dataVConfChartCSS.labelFontSize"></el-input>
                                    </el-form-item>
                                    <el-form-item label="颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.labelColor" type="color"/>
                                    </el-form-item>
                                    <el-form-item label="边距">
                                        <el-input placeholder="数值"
                                                  v-model="dataVChartData.dataVConfChartCSS.labelPadding"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <el-collapse-item title="时间器样式" name="17-2" v-show="dataVChartData.chartType=='clock'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="字号">
                                        <el-input placeholder="数值"
                                                  v-model="dataVChartData.dataVConfChartCSS.textFontSize"></el-input>
                                    </el-form-item>
                                    <el-form-item label="字体颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.textColor" type="color"/>
                                    </el-form-item>
                                    <el-form-item label="字体粗细">
                                        <el-select v-model="dataVChartData.dataVConfChartCSS.textFontWeight"
                                                   placeholder="请选择">
                                            <el-option v-for="data in fontWeight"
                                                       :key="data.key" :label="data.key" :value="data.value">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                    <el-form-item label="格式化">
                                        <el-input placeholder="yyyy-MM-dd hh:mm:ss"
                                                  v-model="dataVChartData.dataVConfChartCSS.textFormat"></el-input>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                            <!--滚动文本组件-->
                            <el-collapse-item title="滚动文本" name="20" v-show="dataVChartData.chartType=='rlabel'">
                                <el-form label-width="84px" label-position="left" class="scrolling content">
                                    <el-form-item label="滚动文本">
                                        <el-input v-model="dataVChartData.jsonData.value"></el-input>
                                    </el-form-item>
                                    <el-form-item label="字号">
                                        <el-input placeholder="数值" v-model="dataVChartData.dataVConfChartCSS.titleFontSize"></el-input>
                                    </el-form-item>
                                    <el-form-item label="字体颜色">
                                        <input v-model="dataVChartData.dataVConfChartCSS.titleColor" type="color"/>
                                    </el-form-item>
                                    <el-form-item label="字体粗细">
                                        <el-select v-model="dataVChartData.dataVConfChartCSS.titleFontWeight" placeholder="请选择">
                                            <el-option v-for="data in fontWeight"
                                                       :key="data.key" :label="data.key" :value="data.value">
                                            </el-option>
                                        </el-select>
                                    </el-form-item>
                                </el-form>
                            </el-collapse-item>
                        </el-collapse>
                    </el-tab-pane>
                </el-tabs>
            </div>
        </div>
    </div>
</div>